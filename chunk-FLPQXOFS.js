import{a as T,b,c as M,d as N,e as P,f as w,g as O,h as R,j as q,k as A}from"./chunk-E7P3DWKB.js";import{Da as _,Gb as S,Lb as B,Ob as E,Sa as d,Ta as u,Ua as g,Va as C,Wa as h,Xa as k,Ya as o,Za as t,_a as c,db as v,fb as x,hb as n,ib as F,kb as y,sa as l,xa as f}from"./chunk-HDYZMK6E.js";function G(e,i){e&1&&(o(0,"p"),n(1,"Loading books..."),t())}function I(e,i){e&1&&(o(0,"p"),n(1,"Failed to load books."),t())}function V(e,i){if(e&1&&(o(0,"li")(1,"strong"),n(2),t(),n(3),t()),e&2){let r=i.$implicit;l(2),F(r.title),l(),y(" by ",r.author," (",r.published_year,") ")}}function H(e,i){if(e&1&&(o(0,"ul"),C(1,V,4,3,"li",null,g),t()),e&2){let r=x();l(),h(r.booksResource.value())}}function L(e,i){e&1&&(o(0,"div",5),n(1,"Title is required"),t())}function j(e,i){e&1&&(o(0,"div",5),n(1,"Author is required"),t())}function z(e,i){e&1&&(o(0,"div",5),n(1,"Year is required"),t())}var D=class e{constructor(i,r){this.http=i;this.fb=r;this.bookForm=this.fb.group({title:["",b.required],author:["",b.required],year:[null,b.required]})}booksResource=E(()=>"https://andreiucm-backend.andreiucm.deno.net/books");bookForm;onSubmit(){if(this.bookForm.invalid)return;let i=this.bookForm.value;this.http.post("https://andreiucm-backend.andreiucm.deno.net/books",{title:i.title,author:i.author,published_year:i.year}).subscribe({next:()=>{this.booksResource.reload(),this.bookForm.reset()},error:r=>{console.error("Failed to add book:",r)}})}static \u0275fac=function(r){return new(r||e)(f(B),f(q))};static \u0275cmp=_({type:e,selectors:[["app-books"]],decls:26,vars:6,consts:[[1,"form-container"],[3,"ngSubmit","formGroup"],[1,"form-group"],["for","title"],["id","title","type","text","placeholder","Enter book title","formControlName","title"],[1,"error"],["for","author"],["id","author","type","text","placeholder","Enter author name","formControlName","author"],["for","year"],["id","year","type","number","placeholder","Publication year","formControlName","year"],["type","submit",3,"disabled"]],template:function(r,a){if(r&1&&(o(0,"h2"),n(1,"Books List"),t(),d(2,G,2,0,"p")(3,I,2,0,"p")(4,H,3,0,"ul"),o(5,"div",0)(6,"h3"),n(7,"Add a new book"),t(),o(8,"form",1),v("ngSubmit",function(){return a.onSubmit()}),o(9,"div",2)(10,"label",3),n(11,"Title"),t(),c(12,"input",4),d(13,L,2,0,"div",5),t(),o(14,"div",2)(15,"label",6),n(16,"Author"),t(),c(17,"input",7),d(18,j,2,0,"div",5),t(),o(19,"div",2)(20,"label",8),n(21,"Year"),t(),c(22,"input",9),d(23,z,2,0,"div",5),t(),o(24,"button",10),n(25,"Add Book"),t()()()),r&2){let m,s,p;l(2),u(a.booksResource.isLoading()?2:a.booksResource.error()?3:4),l(6),k("formGroup",a.bookForm),l(5),u((m=a.bookForm.get("title"))!=null&&m.invalid&&((m=a.bookForm.get("title"))!=null&&m.touched)?13:-1),l(5),u((s=a.bookForm.get("author"))!=null&&s.invalid&&((s=a.bookForm.get("author"))!=null&&s.touched)?18:-1),l(5),u((p=a.bookForm.get("year"))!=null&&p.invalid&&((p=a.bookForm.get("year"))!=null&&p.touched)?23:-1),l(),k("disabled",a.bookForm.invalid)}},dependencies:[S,A,P,T,w,M,N,O,R],styles:[".form-container[_ngcontent-%COMP%]{max-width:350px;margin:2rem auto;padding:2rem;background:#fff;border-radius:8px;box-shadow:0 2px 16px #00000012}h3[_ngcontent-%COMP%]{text-align:center;margin-bottom:2rem}.form-group[_ngcontent-%COMP%]{margin-bottom:1.5rem;display:flex;flex-direction:column}label[_ngcontent-%COMP%]{margin-bottom:.5rem;font-weight:500}input[_ngcontent-%COMP%]{padding:.5rem 1rem;border:1px solid #e0e0e0;border-radius:4px;font-size:1rem}button[_ngcontent-%COMP%]{width:100%;padding:.75rem;background:#1976d2;color:#fff;border:none;border-radius:4px;font-size:1rem;font-weight:600;cursor:pointer;transition:background .2s}button[_ngcontent-%COMP%]:disabled{background:#b0b0b0;cursor:not-allowed}"]})};export{D as BooksComponent};
